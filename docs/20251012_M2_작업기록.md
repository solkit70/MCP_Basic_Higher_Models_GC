# 2025-10-12 M2 작업기록 (로컬 환경 세팅)

목표
- 원클릭 venv 구성, 패키지 설치, 환경 검증 및 스냅샷 저장

수행 절차
1) 스캐폴딩 생성
   - 02-env-setup/ 하위 파일(README, requirements, scripts, tools) 추가
2) 원클릭 세팅 실행
   - PowerShell에서 `./02-env-setup/scripts/setup.ps1` 실행
3) 검증 결과 수집
   - `docs/pip-freeze_YYYYMMDD_HHMMSS.txt` 자동 생성
   - `docs/env_check_ok.txt` 생성 확인

실행 로그(요약)
- python/pip 버전 출력
- 패키지 설치 결과
- env_check.py 출력(OS, Python, 인코딩, venv 경로)

트러블슈팅 메모
- ExecutionPolicy 관련 메시지 발생 시 프로세스 범위 우회로 해결
- 경로/인코딩 문제 없음(UTF-8)

다음 액션(M3 준비)
- MCP SDK 후보 조사 및 설치 스크립트 초안
- stdio/ws 선택 기준 정리 및 테스트 시나리오 설계

## 실행 로그 추가 (setup.ps1)
- 실행 시각: 2025-10-12
- 스크립트: `02-env-setup/scripts/setup.ps1`

```
Process ExecutionPolicy: Bypass
Creating venv at C:\AI_study\Projects\MCP\MCP_Basic_Higher_Models_GC\.venv
Activating venv...
Upgrading pip...
Requirement already satisfied: pip in c:\ai_study\projects\mcp\mcp_basic_higher_models_gc\.venv\lib
\site-packages (23.1.2)
Collecting pip
  Downloading pip-25.2-py3-none-any.whl (1.8 MB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.8/1.8 MB 1.3 MB/s eta 0:00:00
Installing collected packages: pip
  Attempting uninstall: pip
    Found existing installation: pip 23.1.2
    Uninstalling pip-23.1.2:
      Successfully uninstalled pip-23.1.2
Successfully installed pip-25.2
Collecting black==24.8.0 (from -r C:\AI_study\Projects\MCP\MCP_Basic_Higher_Models_GC\02-env-setup\
requirements-dev.txt (line 2))
Downloading black-24.8.0-cp311-cp311-win_amd64.whl.metadata (78 kB)
Collecting ruff==0.6.9 (from -r C:\AI_study\Projects\MCP\MCP_Basic_Higher_Models_GC\02-env-setup\re
quirements-dev.txt (line 3))
Downloading ruff-0.6.9-py3-none-win_amd64.whl.metadata (25 kB)
Collecting pytest==8.3.3 (from -r C:\AI_study\Projects\MCP\MCP_Basic_Higher_Models_GC\02-env-setup\
requirements-dev.txt (line 4))
Downloading pytest-8.3.3-py3-none-any.whl.metadata (7.5 kB)
Collecting click>=8.0.0 (from black==24.8.0->-r C:\AI_study\Projects\MCP\MCP_Basic_Higher_Models_GC\02-env-setup\requirements-dev.txt (line 2))
Using cached click-8.3.0-py3-none-any.whl.metadata (2.6 kB)
Collecting mypy-extensions>=0.4.3 (from black==24.8.0->-r C:\AI_study\Projects\MCP\MCP_Basic_Higher_Models_GC\02-env-setup\requirements-dev.txt (line 2))
Using cached mypy_extensions-1.1.0-py3-none-any.whl.metadata (1.1 kB)
Collecting packaging>=22.0 (from black==24.8.0->-r C:\AI_study\Projects\MCP\MCP_Basic_Higher_Models_GC\02-env-setup\requirements-dev.txt (line 2))
Using cached packaging-25.0-py3-none-any.whl.metadata (3.3 kB)
Collecting pathspec>=0.9.0 (from black==24.8.0->-r C:\AI_study\Projects\MCP\MCP_Basic_Higher_Models_GC\02-env-setup\requirements-dev.txt (line 2))
Using cached pathspec-0.12.1-py3-none-any.whl.metadata (21 kB)
Collecting platformdirs>=2 (from black==24.8.0->-r C:\AI_study\Projects\MCP\MCP_Basic_Higher_Models_GC\02-env-setup\requirements-dev.txt (line 2))
Downloading platformdirs-4.5.0-py3-none-any.whl.metadata (12 kB)
Collecting iniconfig (from pytest==8.3.3->-r C:\AI_study\Projects\MCP\MCP_Basic_Higher_Models_GC\02-env-setup\requirements-dev.txt (line 4))
Using cached iniconfig-2.1.0-py3-none-any.whl.metadata (2.7 kB)
Collecting pluggy<2,>=1.5 (from pytest==8.3.3->-r C:\AI_study\Projects\MCP\MCP_Basic_Higher_Models_GC\02-env-setup\requirements-dev.txt (line 4))
Using cached pluggy-1.6.0-py3-none-any.whl.metadata (4.8 kB)
Collecting colorama (from pytest==8.3.3->-r C:\AI_study\Projects\MCP\MCP_Basic_Higher_Models_GC\02-env-setup\requirements-dev.txt (line 4))
Using cached colorama-0.4.6-py2.py3-none-any.whl.metadata (17 kB)
Downloading black-24.8.0-cp311-cp311-win_amd64.whl (1.4 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.4/1.4 MB 1.3 MB/s  0:00:01
Downloading ruff-0.6.9-py3-none-win_amd64.whl (9.4 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 9.4/9.4 MB 2.4 MB/s  0:00:04
Downloading pytest-8.3.3-py3-none-any.whl (342 kB)
Using cached pluggy-1.6.0-py3-none-any.whl (20 kB)
Using cached click-8.3.0-py3-none-any.whl (107 kB)
Using cached mypy_extensions-1.1.0-py3-none-any.whl (5.0 kB)
Using cached packaging-25.0-py3-none-any.whl (66 kB)
Using cached pathspec-0.12.1-py3-none-any.whl (31 kB)
Downloading platformdirs-4.5.0-py3-none-any.whl (18 kB)
Using cached colorama-0.4.6-py2.py3-none-any.whl (25 kB)
Using cached iniconfig-2.1.0-py3-none-any.whl (6.0 kB)
Installing collected packages: ruff, pluggy, platformdirs, pathspec, packaging, mypy-extensions, iniconfig, colorama, pytest, click, black
Successfully installed black-24.8.0 click-8.3.0 colorama-0.4.6 iniconfig-2.1.0 mypy-extensions-1.1.0 packaging-25.0 pathspec-0.12.1 platformdirs-4.5.0 pluggy-1.6.0 pytest-8.3.3 ruff-0.6.9
Running env_check.py...
=== Environment Check ===
OS: Windows 10 (10.0.26100)
Python: 3.11.4 | Executable: C:\AI_study\Projects\MCP\MCP_Basic_Higher_Models_GC\.venv\Scripts\python.exe
Encoding: fs=utf-8 | stdout=utf-8
In venv: True
Venv path: C:\AI_study\Projects\MCP\MCP_Basic_Higher_Models_GC\.venv
Venv Scripts: C:\AI_study\Projects\MCP\MCP_Basic_Higher_Models_GC\.venv\Scripts
Repo root: C:\AI_study\Projects\MCP\MCP_Basic_Higher_Models_GC
Wrote marker: C:\AI_study\Projects\MCP\MCP_Basic_Higher_Models_GC\docs\env_check_ok.txt
=== OK ===
Saving package snapshot to docs/pip-freeze.txt
Installed packages:
Package         Version
--------------- -------
black           24.8.0
click           8.3.0
colorama        0.4.6
iniconfig       2.1.0
mypy_extensions 1.1.0
packaging       25.0
pathspec        0.12.1
pip             25.2
platformdirs    4.5.0
pluggy          1.6.0
pytest          8.3.3
ruff            0.6.9
setuptools      65.5.0
Setup completed successfully.
```

---

# 2025-10-12 M3 작업기록 (기존 MCP 서버 탐색·평가·연결)

목표
- 후보 서버 비교, SDK 설치, 기본 연결 시도(stdio/ws)

스캐폴딩
- 03-discover-servers/ 하위 폴더 및 샘플 파일 생성

예정 실행 절차
1) configs/server_profiles.json에서 사용할 프로필 enabled=true로 설정
2) scripts/install_sdk.ps1 실행([검증] 완료 후 실제 설치 반영)
3) scripts/health_check.ps1 실행 → logs/health_*.txt 확인
4) 필요 시 clients/python/stdio_client.py, ws_client.py로 개별 점검

로그/산출물
- servers_catalog.md 갱신 예정
- docs/connection_report.md에 성공/실패 요약 추가 예정

이슈/리스크
- [검증] MCP Python SDK 공식 패키지명/버전 확인 필요
- ws/stdio 설정/권한/경로 오류 발생 시 health_check.ps1 출력 참고

## M3 Health Check (Option A: stdio) 실행 로그 요약
- 스크립트: `03-discover-servers/scripts/health_check.ps1`
- 결과 로그: `03-discover-servers/logs/health_20251012_073251.txt`
- 요약:
  - sample-stdio: [ERROR] exec_path not found: C:\path\to\mcp-server.exe
  - sample-ws: [SKIP] enabled=false

```text
=== M3 Health Check Start: 10/12/2025 07:32:51 ===
Config: C:\AI_study\Projects\MCP\MCP_Basic_Higher_Models_GC\03-discover-servers\configs\server_profiles.json
-- Profile: sample-stdio | type=stdio --
[ERROR] exec_path not found: C:\path\to\mcp-server.exe
[SKIP] sample-ws (enabled=false)
=== M3 Health Check End: 10/12/2025 07:32:51 ===
```

## M3 WS 프로필(로컬 echo) 점검 요약
- 프로필: sample-ws (ws://127.0.0.1:9000)
- 스크립트: `03-discover-servers/scripts/health_check.ps1`
- 결과 로그: `03-discover-servers/logs/health_20251012_074928.txt`
- 요약:
  - [OK] URI parsed, DNS resolved
  - [INFO] Would connect (dry-run) to ws://127.0.0.1:9000
  - stdio는 exec_path 미설정으로 계속 오류(의도된 상태)

---

## 오늘 정리 요약 (2025-10-12)
- M2 완료: venv 생성/패키지 설치/환경 검증 자동화(setup.ps1) 및 로그 기록 완료
- M3 스캐폴딩: `03-discover-servers/` 구조, 프로필 설정, 점검/설치 스크립트, Python 클라이언트 초안 추가
- WS 경로 점검: 로컬 WebSocket Echo 서버로 전송(transport) 계층 점검
  - health_check.ps1 결과: WS 프로필 구성 점검 성공(dry-run). stdio는 exec_path 미설정으로 의도적 오류 유지
  - ws_client.py: 지정 URI에 실제 연결 시도(현재는 연결성 검사 중심)

### WebSocket Echo 테스트 목적
- MCP 서버 없이도 네트워크/URI/DNS/포트/헤더 등 전송 계층 이상 유무를 선제적으로 확인
- 이후 실제 MCP 서버 연결 시, 네트워크 이슈를 배제하고 프로토콜/스키마 문제에 집중하기 위함

### Health Check 판정
- WS 프로필: "URI parsed, DNS resolved, Would connect" → 구성 점검 성공(연결 시도는 하지 않음)
- STDIO 프로필: exec_path 미설정 → 실패(의도된 상태)
- 실제 연결 성공 여부는 `ws_client.py` 실연결 실행 결과로 판단(서버가 가동 중이어야 함)

### 재현 방법(요약)
1) 로컬 echo 서버 기동(별도 터미널에서 유지):
   - `python 03-discover-servers/clients/python/ws_echo_server.py --host 127.0.0.1 --port 9000`
2) WS 연결 시도:
   - `python 03-discover-servers/clients/python/ws_client.py ws://127.0.0.1:9000`
3) 구성 점검 로그 생성(dry-run):
   - `03-discover-servers/scripts/health_check.ps1` 실행 → `03-discover-servers/logs/health_*.txt`

## 다음 시간 계획 (M3 심화: 기존 MCP 서버 탐색·연결)
1) 후보 서버 선정 및 비교표 업데이트
   - `03-discover-servers/servers_catalog.md`에 실제 후보 2~3개 채우기(전송, 기능, 인증, 라이선스, 문서/유지보수)
2) SDK 패키지명 확정 및 설치 스크립트 업데이트
   - `scripts/install_sdk.ps1`의 [검증 필요] 부분에 공식 MCP Python SDK 패키지명/버전 고정
3) 샘플 클라이언트 확장
   - `ws_client.py`에 echo 송수신 검증 옵션 추가(메시지 전송→에코 수신 여부 확인)
   - 타임아웃/재시도(백오프), 간단 로깅 강화
4) 프로필 실제 값 채우기
   - WS: 공개/사내 MCP 서버 URI/토큰을 `.env` 또는 `server_profiles.json`에 반영
   - STDIO: 사용 가능한 로컬 MCP 서버 실행 파일 경로가 있다면 `exec_path` 설정
5) 실행 및 기록
   - `health_check.ps1`로 사전 구성 점검 → Python 클라이언트로 실제 연결/툴 조회(가능 시)
   - 결과를 `docs/connection_report.md`와 본 작업기록에 추가

완료 기준(DoD)
- 최소 2개 서버에 대해 연결 경로 검증 로그 확보(WS 1, STDIO 1 권장)
- 실제 연결 1건 이상 성공(에코 송수신 또는 MCP 툴/헬스 호출 중 택1)
- 비교표/리포트 문서 갱신
